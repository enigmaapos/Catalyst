<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Catalyst Protocol DApp</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.2/dist/ethers.min.js"></script>
  <style>
    .tab { display: none; }
    .tab.active { display: block; }
    .btn { background:#2563eb; color:white; padding:6px 12px; border-radius:8px; margin:2px; }
    .mono { font-family: monospace; }
  </style>
</head>
<body class="bg-gray-950 text-gray-100 min-h-screen">
  <div class="max-w-6xl mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6 text-center">üåê Catalyst Protocol DApp</h1>

    <!-- Nav -->
    <div class="flex flex-wrap gap-2 mb-6 justify-center">
      <button class="btn tab-btn" data-tab="dashboard">Dashboard</button>
      <button class="btn tab-btn" data-tab="staking">Staking</button>
      <button class="btn tab-btn" data-tab="bluechip">Blue-chip</button>
      <button class="btn tab-btn" data-tab="governance">Governance</button>
      <button class="btn tab-btn" data-tab="guardians">Guardians</button>
      <button class="btn tab-btn" data-tab="admin">Admin</button>
    </div>

    <!-- =============== DASHBOARD =============== -->
    <div id="dashboard" class="tab active">
      <h2 class="text-2xl font-semibold mb-4">üìä Dashboard</h2>
      <div class="grid gap-4 md:grid-cols-2">
        <div class="p-4 bg-gray-900 rounded-2xl shadow">
          <h3 class="font-semibold mb-2">Protocol Stats</h3>
          <button id="btnStats" class="btn">Load Stats</button>
          <pre id="statsView" class="mono text-sm text-green-400">‚Äî</pre>
        </div>
        <div class="p-4 bg-gray-900 rounded-2xl shadow">
          <h3 class="font-semibold mb-2">Treasury</h3>
          <button id="btnTreasury" class="btn">View Treasury Balance</button>
          <pre id="treasuryView" class="mono text-sm text-blue-400">‚Äî</pre>
        </div>
        <div class="p-4 bg-gray-900 rounded-2xl shadow">
          <h3 class="font-semibold mb-2">Registered Collections</h3>
          <button id="btnCollections" class="btn">View Collections</button>
          <pre id="collectionsView" class="mono text-sm text-yellow-400">‚Äî</pre>
        </div>
        <div class="p-4 bg-gray-900 rounded-2xl shadow">
          <h3 class="font-semibold mb-2">Governance Parameters</h3>
          <button id="btnGovParams" class="btn">Load Governance Params</button>
          <pre id="govParamsView" class="mono text-sm text-purple-400">‚Äî</pre>
        </div>
        <div class="p-4 bg-gray-900 rounded-2xl shadow">
          <h3 class="font-semibold mb-2">Guardian Councils</h3>
          <button id="btnGuardians" class="btn">View Guardians</button>
          <pre id="guardiansView" class="mono text-sm text-orange-400">‚Äî</pre>
        </div>
        <div class="p-4 bg-gray-900 rounded-2xl shadow">
          <h3 class="font-semibold mb-2">Recovery Status</h3>
          <button id="btnRecovery" class="btn">Check Recovery</button>
          <pre id="recoveryView" class="mono text-sm text-red-400">‚Äî</pre>
        </div>
        <div class="p-4 bg-gray-900 rounded-2xl shadow">
          <h3 class="font-semibold mb-2">Cooldowns</h3>
          <button id="btnCooldown" class="btn">View My Cooldown</button>
          <pre id="cooldownView" class="mono text-sm text-cyan-400">‚Äî</pre>
        </div>
        <div class="p-4 bg-gray-900 rounded-2xl shadow">
          <h3 class="font-semibold mb-2">Burn Stats</h3>
          <button id="btnBurnStats" class="btn">View My Burned CATA</button>
          <pre id="burnStatsView" class="mono text-sm text-pink-400">‚Äî</pre>
        </div>
      </div>
    </div>

    <!-- =============== STAKING =============== -->
    <div id="staking" class="tab">
      <h2 class="text-2xl font-semibold mb-4">üîí NFT Staking</h2>
      <input id="stakeCollection" placeholder="Collection Address" class="p-2 rounded text-black w-full mb-2">
      <input id="stakeTokenId" placeholder="Token ID" class="p-2 rounded text-black w-full mb-2">
      <button id="btnStake" class="btn">Stake NFT</button>
      <button id="btnUnstake" class="btn">Unstake NFT</button>
      <button id="btnHarvest" class="btn">Harvest</button>
      <button id="btnPending" class="btn">View Pending Rewards</button>
      <pre id="stakeLog" class="mono mt-3 text-green-400">‚Äî</pre>
    </div>

    <!-- =============== BLUECHIP =============== -->
    <div id="bluechip" class="tab">
      <h2 class="text-2xl font-semibold mb-4">üíé Blue-chip</h2>
      <button id="btnEnrollBluechip" class="btn">Enroll Wallet</button>
      <input id="colBluechip" placeholder="Collection address" class="p-2 rounded text-black w-full mt-2 mb-2">
      <button id="btnHarvestBluechip" class="btn">Harvest Bluechip</button>
      <h3 class="mt-6 text-xl font-semibold">Admin Tools</h3>
      <input id="colFlag" placeholder="Collection address" class="p-2 rounded text-black w-full mb-2">
      <select id="isBluechipFlag" class="p-2 rounded text-black w-full mb-2">
        <option value="true">True</option>
        <option value="false">False</option>
      </select>
      <button id="btnSetBluechip" class="btn">Set Bluechip Collection</button>
    </div>

    <!-- =============== GOVERNANCE =============== -->
    <div id="governance" class="tab">
      <h2 class="text-2xl font-semibold mb-4">üó≥Ô∏è Governance</h2>
      <select id="proposalType" class="p-2 rounded text-black w-full mb-2">
        <option value="0">BASE_REWARD</option>
        <option value="1">HARVEST_FEE</option>
        <option value="2">UNSTAKE_FEE</option>
        <option value="3">REGISTRATION_FEE_FALLBACK</option>
        <option value="4">VOTING_PARAM</option>
        <option value="5">TIER_UPGRADE</option>
      </select>
      <input id="paramTarget" placeholder="Param Target" class="p-2 rounded text-black w-full mb-2">
      <input id="newValue" placeholder="New Value" class="p-2 rounded text-black w-full mb-2">
      <button id="btnPropose" class="btn">Propose</button>
      <input id="proposalId" placeholder="Proposal ID" class="p-2 rounded text-black w-full mt-4 mb-2">
      <button id="btnVote" class="btn">Vote</button>
      <button id="btnExecuteProposal" class="btn">Execute Proposal</button>
      <pre id="govLog" class="mono mt-3 text-purple-400">‚Äî</pre>
    </div>

    <!-- =============== GUARDIANS =============== -->
    <div id="guardians" class="tab">
      <h2 class="text-2xl font-semibold mb-4">üõ°Ô∏è Guardians</h2>
      <input id="guardianIdx" placeholder="Index" class="p-2 rounded text-black w-full mb-2">
      <input id="guardianAddr" placeholder="Guardian Address" class="p-2 rounded text-black w-full mb-2">
      <button id="btnSetDeployerGuardian" class="btn">Set Deployer Guardian</button>
      <button id="btnSetAdminGuardian" class="btn">Set Admin Guardian</button>
      <h3 class="mt-6 text-xl">Recovery</h3>
      <input id="newDeployer" placeholder="New Deployer" class="p-2 rounded text-black w-full mb-2">
      <button id="btnProposeDeployerRecovery" class="btn">Propose Deployer Recovery</button>
      <button id="btnApproveDeployerRecovery" class="btn">Approve</button>
      <button id="btnExecuteDeployerRecovery" class="btn">Execute</button>
      <input id="newAdmin" placeholder="New Admin" class="p-2 rounded text-black w-full mb-2 mt-6">
      <button id="btnProposeAdminRecovery" class="btn">Propose Admin Recovery</button>
      <button id="btnApproveAdminRecovery" class="btn">Approve</button>
      <button id="btnExecuteAdminRecovery" class="btn">Execute</button>
    </div>

    <!-- =============== ADMIN =============== -->
    <div id="admin" class="tab">
      <h2 class="text-2xl font-semibold mb-4">‚öôÔ∏è Admin</h2>
      <input id="treasuryTo" placeholder="Recipient address" class="p-2 rounded text-black w-full mb-2">
      <input id="treasuryAmt" placeholder="Amount" class="p-2 rounded text-black w-full mb-2">
      <button id="btnWithdrawTreasury" class="btn">Withdraw Treasury</button>
      <h3 class="mt-6">Pause / Unpause</h3>
      <button id="btnPause" class="btn">Pause</button>
      <button id="btnUnpause" class="btn">Unpause</button>
    </div>
  </div>

  <script>
    /* Navigation */
    document.querySelectorAll('.tab-btn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
        document.getElementById(btn.dataset.tab).classList.add('active');
      });
    });

    /* Ethers.js */
    let provider, signer, walletAddress, CONTRACT, CONTRACT_ADDRESS, ABI;
    async function init() {
      provider = new ethers.BrowserProvider(window.ethereum);
      signer = await provider.getSigner();
      walletAddress = await signer.getAddress();
      const res = await fetch("abi/CatalystNFTStakingUpgradeable.json");
      ABI = await res.json();
      CONTRACT_ADDRESS = "YOUR_DEPLOYED_CONTRACT";
      CONTRACT = new ethers.Contract(CONTRACT_ADDRESS, ABI, signer);
      console.log("Wallet:", walletAddress);
    }
    window.onload = init;
  </script>
</body>
</html>
