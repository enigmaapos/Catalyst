<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Catalyst DApp Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.7.0/dist/ethers.min.js"></script>
  <style>
    body { font-family: sans-serif; background: #0f172a; color: #f1f5f9; padding: 20px; }
    h1 { font-size: 24px; }
    .card { background: #1e293b; padding: 16px; border-radius: 12px; margin: 12px 0; }
    input { padding: 6px; border-radius: 6px; border: none; margin: 4px 0; width: 100%; }
    button { padding: 6px 12px; border: none; border-radius: 6px; margin-top: 6px; cursor: pointer; background: #3b82f6; color: white; }
    button:hover { background: #2563eb; }
    pre { background: #0f172a; padding: 8px; border-radius: 8px; overflow-x: auto; font-size: 12px; }
    .grid { display: grid; gap: 10px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
  </style>
</head>
<body>
  <h1>Catalyst DApp Dashboard</h1>
  <button onclick="connectWallet()">Connect Wallet</button>
  <p id="status">Not connected</p>

  <!-- Overview -->
  <div class="card">
    <h2>Overview</h2>
    <p>Fee Split: 90% Burn / 9% Treasury / 1% Deployer</p>
    <p>Global Cap: 1,000,000,000</p>
    <p>Per-Collection Cap: 20,000</p>
    <p>Treasury Balance: <span id="treasury">0</span> CATA</p>
    <p>Your Balance: <span id="balance">0</span> CATA</p>
  </div>

  <!-- Stake / Unstake / Harvest -->
  <div class="grid">
    <div class="card">
      <h2>Stake NFT</h2>
      <input id="stakeCollection" placeholder="Collection (0x…)" />
      <input id="stakeTokenId" placeholder="Token ID" />
      <label><input type="checkbox" id="stakePermanent"> Permanent</label><br>
      <button onclick="stake()">Stake</button>
    </div>
    <div class="card">
      <h2>Unstake NFT</h2>
      <input id="unstakeCollection" placeholder="Collection (0x…)" />
      <input id="unstakeTokenId" placeholder="Token ID" />
      <button onclick="unstake()">Unstake</button>
    </div>
    <div class="card">
      <h2>Harvest Rewards</h2>
      <input id="harvestCollection" placeholder="Collection (0x…)" />
      <input id="harvestTokenId" placeholder="Token ID" />
      <button onclick="harvest()">Harvest</button>
    </div>
    <div class="card">
      <h2>Batch Stake</h2>
      <input id="batchCollection" placeholder="Collection (0x…)" />
      <input id="batchTokenIds" placeholder="1,2,3" />
      <label><input type="checkbox" id="batchPermanent"> Permanent</label><br>
      <button onclick="batchStake()">Batch Stake</button>
    </div>
  </div>

  <!-- Bluechip -->
  <div class="grid">
    <div class="card">
      <h2>Enroll Bluechip</h2>
      <button onclick="enrollBluechip()">Enroll Wallet</button>
    </div>
    <div class="card">
      <h2>Harvest Bluechip</h2>
      <input id="blueCollection" placeholder="Collection (0x…)" />
      <button onclick="harvestBluechip()">Harvest</button>
    </div>
    <div class="card">
      <h2>Set Bluechip (Admin)</h2>
      <input id="blueAdminCollection" placeholder="Collection (0x…)" />
      <input id="blueAdminFlag" placeholder="true / false" />
      <button onclick="setBluechip()">Set</button>
    </div>
  </div>

  <!-- Governance -->
  <div class="grid">
    <div class="card">
      <h2>Propose</h2>
      <input id="proposalType" placeholder="Type (0=BASE_REWARD,…)" />
      <input id="proposalParam" placeholder="Param target" />
      <input id="proposalValue" placeholder="New value" />
      <button onclick="propose()">Propose</button>
    </div>
    <div class="card">
      <h2>Vote / Execute</h2>
      <input id="proposalId" placeholder="Proposal ID (bytes32)" />
      <button onclick="vote()">Vote</button>
      <button onclick="executeProposal()">Execute</button>
    </div>
  </div>

  <!-- Admin -->
  <div class="grid">
    <div class="card">
      <h2>Set Admin Guardian</h2>
      <input id="adminIdx" placeholder="Index (0-6)" />
      <input id="adminAddr" placeholder="Guardian address" />
      <button onclick="setAdminGuardian()">Set</button>
    </div>
    <div class="card">
      <h2>Admin Recovery</h2>
      <input id="adminRecoveryAddr" placeholder="Proposed admin" />
      <button onclick="proposeAdminRecovery()">Propose</button>
      <button onclick="approveAdminRecovery()">Approve</button>
      <button onclick="executeAdminRecovery()">Execute</button>
    </div>
    <div class="card">
      <h2>Treasury Withdrawal</h2>
      <input id="treasuryTo" placeholder="Recipient" />
      <input id="treasuryAmt" placeholder="Amount" />
      <button onclick="withdrawTreasury()">Withdraw</button>
    </div>
    <div class="card">
      <h2>Pause Controls</h2>
      <button onclick="pause()">Pause</button>
      <button onclick="unpause()">Unpause</button>
    </div>
  </div>

  <!-- Deployer -->
  <div class="grid">
    <div class="card">
      <h2>Set Deployer Guardian</h2>
      <input id="deployerIdx" placeholder="Index (0-6)" />
      <input id="deployerAddr" placeholder="Guardian address" />
      <button onclick="setDeployerGuardian()">Set</button>
    </div>
    <div class="card">
      <h2>Deployer Recovery</h2>
      <input id="deployerRecoveryAddr" placeholder="Proposed deployer" />
      <button onclick="proposeDeployerRecovery()">Propose</button>
      <button onclick="approveDeployerRecovery()">Approve</button>
      <button onclick="executeDeployerRecovery()">Execute</button>
    </div>
  </div>

  <!-- Tools -->
  <div class="grid">
    <div class="card">
      <h2>Register Collection</h2>
      <input id="regCollection" placeholder="Collection" />
      <input id="regSupply" placeholder="Declared Max Supply" />
      <button onclick="registerCollection()">Register</button>
    </div>
    <div class="card">
      <h2>Pending Rewards View</h2>
      <input id="viewColl" placeholder="Collection" />
      <input id="viewOwner" placeholder="Owner" />
      <input id="viewToken" placeholder="Token ID" />
      <button onclick="pendingRewardsView()">Check</button>
    </div>
    <div class="card">
      <h2>ABI Viewer</h2>
      <pre id="abi"></pre>
    </div>
  </div>

  <!-- Log -->
  <div class="card">
    <h2>Activity Log</h2>
    <pre id="log"></pre>
  </div>

  <script>
    const CONTRACT_ADDRESS = "0xF6f4B2eb6b9D4e87fA5D38DE9124Dd4C212a61FD";
    const CONTRACT_ABI = [
	{
		"inputs": [],
		"name": "AccessControlBadConfirmation",
		"type": "error"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "account",
				"type": "address"
			},
			{
				"internalType": "bytes32",
				"name": "neededRole",
				"type": "bytes32"
			}
		],
		"name": "AccessControlUnauthorizedAccount",
		"type": "error"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "target",
				"type": "address"
			}
		],
		"name": "AddressEmptyCode",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "AlreadyApproved",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "AlreadyEnrolled",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "AlreadyExists",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "BadParam",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "BatchTooLarge",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "Cooldown",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "DuplicateGuardian",
		"type": "error"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "implementation",
				"type": "address"
			}
		],
		"name": "ERC1967InvalidImplementation",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "ERC1967NonPayable",
		"type": "error"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "allowance",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "needed",
				"type": "uint256"
			}
		],
		"name": "ERC20InsufficientAllowance",
		"type": "error"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "sender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "balance",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "needed",
				"type": "uint256"
			}
		],
		"name": "ERC20InsufficientBalance",
		"type": "error"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "approver",
				"type": "address"
			}
		],
		"name": "ERC20InvalidApprover",
		"type": "error"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "receiver",
				"type": "address"
			}
		],
		"name": "ERC20InvalidReceiver",
		"type": "error"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "sender",
				"type": "address"
			}
		],
		"name": "ERC20InvalidSender",
		"type": "error"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			}
		],
		"name": "ERC20InvalidSpender",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "Expired",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "FailedCall",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "Ineligible",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "Insufficient",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "InvalidInitialization",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "NoRequest",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "NotInitializing",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "NotRegistered",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "NotStaked",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "TermNotExpired",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "Threshold",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "UUPSUnauthorizedCallContext",
		"type": "error"
	},
	{
		"inputs": [
			{
				"internalType": "bytes32",
				"name": "slot",
				"type": "bytes32"
			}
		],
		"name": "UUPSUnsupportedProxiableUUID",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "Unauthorized",
		"type": "error"
	},
	{
		"inputs": [],
		"name": "ZeroAddress",
		"type": "error"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "newAdmin",
				"type": "address"
			}
		],
		"name": "AdminRecovered",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "guardian",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint8",
				"name": "approvals",
				"type": "uint8"
			}
		],
		"name": "AdminRecoveryApproved",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "proposer",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "address",
				"name": "proposed",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "deadline",
				"type": "uint256"
			}
		],
		"name": "AdminRecoveryProposed",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Approval",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "oldValue",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "newValue",
				"type": "uint256"
			}
		],
		"name": "BaseRewardRateUpdated",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "bool",
				"name": "isBluechip",
				"type": "bool"
			}
		],
		"name": "BluechipCollectionSet",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "declaredSupply",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "paid",
				"type": "uint256"
			}
		],
		"name": "CollectionAdded",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "oldDeployer",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "newDeployer",
				"type": "address"
			}
		],
		"name": "DeployerRecovered",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "guardian",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint8",
				"name": "approvals",
				"type": "uint8"
			}
		],
		"name": "DeployerRecoveryApproved",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "proposer",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "address",
				"name": "proposed",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "deadline",
				"type": "uint256"
			}
		],
		"name": "DeployerRecoveryProposed",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "bytes32",
				"name": "council",
				"type": "bytes32"
			},
			{
				"indexed": false,
				"internalType": "uint8",
				"name": "idx",
				"type": "uint8"
			},
			{
				"indexed": false,
				"internalType": "address",
				"name": "guardian",
				"type": "address"
			}
		],
		"name": "GuardianSet",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "oldValue",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "newValue",
				"type": "uint256"
			}
		],
		"name": "HarvestFeeUpdated",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint64",
				"name": "version",
				"type": "uint64"
			}
		],
		"name": "Initialized",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "InternalStakeRecorded",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "InternalUnstakeRecorded",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "bool",
				"name": "permanent",
				"type": "bool"
			}
		],
		"name": "NFTStaked",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "NFTUnstaked",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "address",
				"name": "account",
				"type": "address"
			}
		],
		"name": "Paused",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "bytes32",
				"name": "id",
				"type": "bytes32"
			},
			{
				"indexed": false,
				"internalType": "enum GovernanceLib.ProposalType",
				"name": "pType",
				"type": "uint8"
			},
			{
				"indexed": false,
				"internalType": "uint8",
				"name": "paramTarget",
				"type": "uint8"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "proposer",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "newValue",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "startBlock",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "endBlock",
				"type": "uint256"
			}
		],
		"name": "ProposalCreated",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "bytes32",
				"name": "id",
				"type": "bytes32"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "appliedValue",
				"type": "uint256"
			}
		],
		"name": "ProposalExecuted",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "bytes32",
				"name": "id",
				"type": "bytes32"
			}
		],
		"name": "ProposalMarkedExecuted",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "oldValue",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "newValue",
				"type": "uint256"
			}
		],
		"name": "RegistrationFeeUpdated",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "gross",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "burned",
				"type": "uint256"
			}
		],
		"name": "RewardsHarvested",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "bytes32",
				"name": "role",
				"type": "bytes32"
			},
			{
				"indexed": true,
				"internalType": "bytes32",
				"name": "previousAdminRole",
				"type": "bytes32"
			},
			{
				"indexed": true,
				"internalType": "bytes32",
				"name": "newAdminRole",
				"type": "bytes32"
			}
		],
		"name": "RoleAdminChanged",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "bytes32",
				"name": "role",
				"type": "bytes32"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "account",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "sender",
				"type": "address"
			}
		],
		"name": "RoleGranted",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "bytes32",
				"name": "role",
				"type": "bytes32"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "account",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "sender",
				"type": "address"
			}
		],
		"name": "RoleRevoked",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Transfer",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "TreasuryDeposit",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "TreasuryWithdrawal",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "address",
				"name": "account",
				"type": "address"
			}
		],
		"name": "Unpaused",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "oldValue",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "newValue",
				"type": "uint256"
			}
		],
		"name": "UnstakeFeeUpdated",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "implementation",
				"type": "address"
			}
		],
		"name": "Upgraded",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "bytes32",
				"name": "id",
				"type": "bytes32"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "voter",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "weightScaled",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "address",
				"name": "attributedCollection",
				"type": "address"
			}
		],
		"name": "VoteCast",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint8",
				"name": "target",
				"type": "uint8"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "oldValue",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "newValue",
				"type": "uint256"
			}
		],
		"name": "VotingParamUpdated",
		"type": "event"
	},
	{
		"inputs": [],
		"name": "ADMIN_GCOUNT",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "ADMIN_THRESHOLD",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "BP_DENOM",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "BURN_BP",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "CONTRACT_ADMIN_ROLE",
		"outputs": [
			{
				"internalType": "bytes32",
				"name": "",
				"type": "bytes32"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "DEFAULT_ADMIN_ROLE",
		"outputs": [
			{
				"internalType": "bytes32",
				"name": "",
				"type": "bytes32"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "DEPLOYER_BP",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "DEPLOYER_GCOUNT",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "DEPLOYER_THRESHOLD",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "GLOBAL_CAP",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "MAX_HARVEST_BATCH",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "MAX_STAKE_PER_COLLECTION",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "PERM_CAP",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "RECOVERY_WINDOW",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "TERM_CAP",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "TREASURY_BP",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "UPGRADE_INTERFACE_VERSION",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "WEIGHT_SCALE",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"name": "adminGuardians",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "adminHasApproved",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "adminRecovery",
		"outputs": [
			{
				"internalType": "address",
				"name": "proposed",
				"type": "address"
			},
			{
				"internalType": "uint8",
				"name": "approvals",
				"type": "uint8"
			},
			{
				"internalType": "uint256",
				"name": "deadline",
				"type": "uint256"
			},
			{
				"internalType": "bool",
				"name": "executed",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			}
		],
		"name": "allowance",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "approve",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "approveAdminRecovery",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "approveDeployerRecovery",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "account",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"internalType": "uint256[]",
				"name": "tokenIds",
				"type": "uint256[]"
			},
			{
				"internalType": "bool",
				"name": "permanent",
				"type": "bool"
			}
		],
		"name": "batchStake",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "burnedCatalystByAddress",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "collectionRegistrationFee",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "decimals",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "deployerAddress",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"name": "deployerGuardians",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "deployerHasApproved",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "deployerRecovery",
		"outputs": [
			{
				"internalType": "address",
				"name": "proposed",
				"type": "address"
			},
			{
				"internalType": "uint8",
				"name": "approvals",
				"type": "uint8"
			},
			{
				"internalType": "uint256",
				"name": "deadline",
				"type": "uint256"
			},
			{
				"internalType": "bool",
				"name": "executed",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "enrollBluechip",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "executeAdminRecovery",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "executeDeployerRecovery",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "bytes32",
				"name": "id",
				"type": "bytes32"
			}
		],
		"name": "executeProposal",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "bytes32",
				"name": "role",
				"type": "bytes32"
			}
		],
		"name": "getRoleAdmin",
		"outputs": [
			{
				"internalType": "bytes32",
				"name": "",
				"type": "bytes32"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "bytes32",
				"name": "role",
				"type": "bytes32"
			},
			{
				"internalType": "address",
				"name": "account",
				"type": "address"
			}
		],
		"name": "grantRole",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "harvest",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "collection",
				"type": "address"
			}
		],
		"name": "harvestBluechip",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "bytes32",
				"name": "role",
				"type": "bytes32"
			},
			{
				"internalType": "address",
				"name": "account",
				"type": "address"
			}
		],
		"name": "hasRole",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "initialHarvestBurnFeeRate",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"components": [
					{
						"internalType": "address",
						"name": "owner",
						"type": "address"
					},
					{
						"internalType": "uint256",
						"name": "rewardRateIncrementPerNFT",
						"type": "uint256"
					},
					{
						"internalType": "uint256",
						"name": "initialHarvestBurnFeeRate",
						"type": "uint256"
					},
					{
						"internalType": "uint256",
						"name": "unstakeBurnFee",
						"type": "uint256"
					},
					{
						"internalType": "uint256",
						"name": "termDurationBlocks",
						"type": "uint256"
					},
					{
						"internalType": "uint256",
						"name": "numberOfBlocksPerRewardUnit",
						"type": "uint256"
					},
					{
						"internalType": "uint256",
						"name": "collectionRegistrationFee",
						"type": "uint256"
					},
					{
						"internalType": "uint256",
						"name": "stakingCooldownBlocks",
						"type": "uint256"
					},
					{
						"internalType": "uint256",
						"name": "votingDurationBlocks",
						"type": "uint256"
					},
					{
						"internalType": "uint256",
						"name": "minVotesRequiredScaled",
						"type": "uint256"
					},
					{
						"internalType": "uint256",
						"name": "collectionVoteCapPercent",
						"type": "uint256"
					},
					{
						"internalType": "uint256",
						"name": "minStakeAgeForVoting",
						"type": "uint256"
					},
					{
						"internalType": "uint256",
						"name": "maxBaseRewardRate",
						"type": "uint256"
					},
					{
						"internalType": "address[7]",
						"name": "deployerGuardians",
						"type": "address[7]"
					},
					{
						"internalType": "address[7]",
						"name": "adminGuardians",
						"type": "address[7]"
					},
					{
						"internalType": "uint256",
						"name": "bluechipWalletFee",
						"type": "uint256"
					}
				],
				"internalType": "struct CatalystNFTStakingUpgradeable.InitConfig",
				"name": "cfg",
				"type": "tuple"
			}
		],
		"name": "initialize",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "isAdminGuardian",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "isDeployerGuardian",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "lastStakingBlock",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "maxBaseRewardRate",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "minStakeAgeForVoting",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "numberOfBlocksPerRewardUnit",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			},
			{
				"internalType": "bytes",
				"name": "",
				"type": "bytes"
			}
		],
		"name": "onERC721Received",
		"outputs": [
			{
				"internalType": "bytes4",
				"name": "",
				"type": "bytes4"
			}
		],
		"stateMutability": "pure",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "pause",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "paused",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "pendingRewardsView",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "enum GovernanceLib.ProposalType",
				"name": "pType",
				"type": "uint8"
			},
			{
				"internalType": "uint8",
				"name": "paramTarget",
				"type": "uint8"
			},
			{
				"internalType": "uint256",
				"name": "newValue",
				"type": "uint256"
			},
			{
				"internalType": "address",
				"name": "collectionContext",
				"type": "address"
			}
		],
		"name": "propose",
		"outputs": [
			{
				"internalType": "bytes32",
				"name": "",
				"type": "bytes32"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "newAdmin",
				"type": "address"
			}
		],
		"name": "proposeAdminRecovery",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "newDeployer",
				"type": "address"
			}
		],
		"name": "proposeDeployerRecovery",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "proxiableUUID",
		"outputs": [
			{
				"internalType": "bytes32",
				"name": "",
				"type": "bytes32"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "declaredMaxSupply",
				"type": "uint256"
			}
		],
		"name": "registerCollection",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"name": "registeredCollections",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "registeredIndex",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "bytes32",
				"name": "role",
				"type": "bytes32"
			},
			{
				"internalType": "address",
				"name": "callerConfirmation",
				"type": "address"
			}
		],
		"name": "renounceRole",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "bytes32",
				"name": "role",
				"type": "bytes32"
			},
			{
				"internalType": "address",
				"name": "account",
				"type": "address"
			}
		],
		"name": "revokeRole",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "rewardRateIncrementPerNFT",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint8",
				"name": "idx",
				"type": "uint8"
			},
			{
				"internalType": "address",
				"name": "guardian",
				"type": "address"
			}
		],
		"name": "setAdminGuardian",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"internalType": "bool",
				"name": "isBluechip",
				"type": "bool"
			}
		],
		"name": "setBluechipCollection",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint8",
				"name": "idx",
				"type": "uint8"
			},
			{
				"internalType": "address",
				"name": "guardian",
				"type": "address"
			}
		],
		"name": "setDeployerGuardian",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			},
			{
				"internalType": "bool",
				"name": "permanent",
				"type": "bool"
			}
		],
		"name": "stake",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "stakingCooldownBlocks",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "stakingStats",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "totalAll",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "totalTerm",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "totalPermanent",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "remainingGlobal",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "remainingTerm",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "remainingPermanent",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "bytes4",
				"name": "interfaceId",
				"type": "bytes4"
			}
		],
		"name": "supportsInterface",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "termDurationBlocks",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "totalSupply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "transfer",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "transferFrom",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "treasuryAddress",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "treasuryBalance",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "unpause",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "collection",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "tokenId",
				"type": "uint256"
			}
		],
		"name": "unstake",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "unstakeBurnFee",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "newImplementation",
				"type": "address"
			},
			{
				"internalType": "bytes",
				"name": "data",
				"type": "bytes"
			}
		],
		"name": "upgradeToAndCall",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "bytes32",
				"name": "id",
				"type": "bytes32"
			}
		],
		"name": "vote",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "withdrawTreasury",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	}
] ;

    let provider, signer, contract, userAddr;

    const log = (msg) => {
      document.getElementById("log").textContent = msg + "\n" + document.getElementById("log").textContent;
    };

    async function connectWallet() {
      if (!window.ethereum) return alert("Install MetaMask");
      provider = new ethers.BrowserProvider(window.ethereum);
      await provider.send("eth_requestAccounts", []);
      signer = await provider.getSigner();
      contract = new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signer);
      userAddr = await signer.getAddress();
      document.getElementById("status").innerText = "Connected: " + userAddr;
      refresh();
      log("Wallet connected: " + userAddr);
      document.getElementById("abi").textContent = JSON.stringify(CONTRACT_ABI, null, 2);
    }

    async function refresh() {
      try {
        const bal = await contract.balanceOf(userAddr);
        document.getElementById("balance").innerText = ethers.formatUnits(bal, 18);
        const treas = await contract.treasuryBalance();
        document.getElementById("treasury").innerText = ethers.formatUnits(treas, 18);
      } catch (e) { log("⚠️ Balance fetch error"); }
    }

    async function runTx(fn, ...args) {
      try {
        const tx = await fn(...args);
        log("Tx sent: " + tx.hash);
        await tx.wait();
        log("✅ Success: " + tx.hash);
        refresh();
      } catch (err) { log("❌ Error: " + (err.message || err)); }
    }

    // Stake flows
    function stake() { runTx(contract.stake,
      document.getElementById("stakeCollection").value,
      Number(document.getElementById("stakeTokenId").value),
      document.getElementById("stakePermanent").checked); }
    function unstake() { runTx(contract.unstake,
      document.getElementById("unstakeCollection").value,
      Number(document.getElementById("unstakeTokenId").value)); }
    function harvest() { runTx(contract.harvest,
      document.getElementById("harvestCollection").value,
      Number(document.getElementById("harvestTokenId").value)); }
    function batchStake() {
      const ids = document.getElementById("batchTokenIds").value.split(",").map(x => Number(x.trim()));
      runTx(contract.batchStake,
        document.getElementById("batchCollection").value,
        ids,
        document.getElementById("batchPermanent").checked);
    }

    // Bluechip
    function enrollBluechip() { runTx(contract.enrollBluechip); }
    function harvestBluechip() { runTx(contract.harvestBluechip,
      document.getElementById("blueCollection").value); }
    function setBluechip() { runTx(contract.setBluechipCollection,
      document.getElementById("blueAdminCollection").value,
      document.getElementById("blueAdminFlag").value === "true"); }

    // Governance
    function propose() { runTx(contract.propose,
      Number(document.getElementById("proposalType").value),
      Number(document.getElementById("proposalParam").value),
      Number(document.getElementById("proposalValue").value),
      ethers.ZeroAddress); }
    function vote() { runTx(contract.vote, document.getElementById("proposalId").value); }
    function executeProposal() { runTx(contract.executeProposal, document.getElementById("proposalId").value); }

    // Admin
    function setAdminGuardian() { runTx(contract.setAdminGuardian,
      Number(document.getElementById("adminIdx").value),
      document.getElementById("adminAddr").value); }
    function proposeAdminRecovery() { runTx(contract.proposeAdminRecovery,
      document.getElementById("adminRecoveryAddr").value); }
    function approveAdminRecovery() { runTx(contract.approveAdminRecovery); }
    function executeAdminRecovery() { runTx(contract.executeAdminRecovery); }
    function withdrawTreasury() { runTx(contract.withdrawTreasury,
      document.getElementById("treasuryTo").value,
      ethers.parseUnits(document.getElementById("treasuryAmt").value, 18)); }
    function pause() { runTx(contract.pause); }
    function unpause() { runTx(contract.unpause); }

    // Deployer
    function setDeployerGuardian() { runTx(contract.setDeployerGuardian,
      Number(document.getElementById("deployerIdx").value),
      document.getElementById("deployerAddr").value); }
    function proposeDeployerRecovery() { runTx(contract.proposeDeployerRecovery,
      document.getElementById("deployerRecoveryAddr").value); }
    function approveDeployerRecovery() { runTx(contract.approveDeployerRecovery); }
    function executeDeployerRecovery() { runTx(contract.executeDeployerRecovery); }

    // Tools
    function registerCollection() { runTx(contract.registerCollection,
      document.getElementById("regCollection").value,
      Number(document.getElementById("regSupply").value)); }
    async function pendingRewardsView() {
      try {
        const res = await contract.pendingRewardsView(
          document.getElementById("viewColl").value,
          document.getElementById("viewOwner").value,
          Number(document.getElementById("viewToken").value)
        );
        log("Pending Rewards: " + ethers.formatUnits(res, 18));
      } catch (err) { log("❌ Error: " + (err.message || err)); }
    }
  </script>
</body>
</html>
